{
    "type": "reply",
    "tag": "javascript",
    "difficulty": "1",
    "from": "https://github.com/qiu-deqing/fe-interview",
    "description": "<p>编写一个函数实现form的序列化(即将一个表单中的键值序列化为可提交的字符串)</p>\n",
    "answer": "<form id=\"target\">\n        <select name=\"age\">\n            <option value=\"aaa\">aaa</option>\n            <option value=\"bbb\" selected>bbb</option>\n        </select>\n        <select name=\"friends\" multiple>\n            <option value=\"qiu\" selected>qiu</option>\n            <option value=\"de\">de</option>\n            <option value=\"qing\" selected>qing</option>\n        </select>\n        <input name=\"name\" value=\"qiudeqing\">\n        <input type=\"password\" name=\"password\" value=\"11111\">\n        <input type=\"hidden\" name=\"salery\" value=\"3333\">\n        <textarea name=\"description\">description</textarea>\n        <input type=\"checkbox\" name=\"hobby\" checked value=\"football\">Football\n        <input type=\"checkbox\" name=\"hobby\" value=\"basketball\">Basketball\n        <input type=\"radio\" name=\"sex\" checked value=\"Female\">Female\n        <input type=\"radio\" name=\"sex\" value=\"Male\">Male\n    </form>\n\n\n<pre><code>&lt;script&gt;\n\n/**\n * 将一个表单元素序列化为可提交的字符串\n *\n * @param {FormElement} form 需要序列化的表单元素\n * @return {string} 表单序列化后的字符串\n */\nfunction serializeForm(form) {\n  if (!form || form.nodeName.toUpperCase() !== &#39;FORM&#39;) {\n    return;\n  }\n\n  var result = [];\n\n  var i, len;\n  var field, fieldName, fieldType;\n\n  for (i = 0, len = form.length; i &lt; len; ++i) {\n    field = form.elements[i];\n    fieldName = field.name;\n    fieldType = field.type;\n\n    if (field.disabled || !fieldName) {\n      continue;\n    } // enf if\n\n    switch (fieldType) {\n      case &#39;text&#39;:\n      case &#39;password&#39;:\n      case &#39;hidden&#39;:\n      case &#39;textarea&#39;:\n        result.push(encodeURIComponent(fieldName) + &#39;=&#39; +\n            encodeURIComponent(field.value));\n        break;\n\n      case &#39;radio&#39;:\n      case &#39;checkbox&#39;:\n        if (field.checked) {\n          result.push(encodeURIComponent(fieldName) + &#39;=&#39; +\n            encodeURIComponent(field.value));\n        }\n        break;\n\n      case &#39;select-one&#39;:\n      case &#39;select-multiple&#39;:\n        for (var j = 0, jLen = field.options.length; j &lt; jLen; ++j) {\n          if (field.options[j].selected) {\n            result.push(encodeURIComponent(fieldName) + &#39;=&#39; +\n              encodeURIComponent(field.options[j].value || field.options[j].text));\n          }\n        } // end for\n        break;\n\n      case &#39;file&#39;:\n      case &#39;submit&#39;:\n        break; // 是否处理？\n\n      default:\n        break;\n    } // end switch\n  } // end for\n\n    return result.join(&#39;&amp;&#39;);\n}\n\nvar form = document.getElementById(&#39;target&#39;);\nconsole.log(serializeForm(form));\n&lt;/script&gt;\n</code></pre>",
    "options": []
}