{
    "type": "reply",
    "tag": "javascript",
    "difficulty": "1",
    "from": "https://github.com/qiu-deqing/fe-interview",
    "description": "编写一个函数实现form的序列化(即将一个表单中的键值序列化为可提交的字符串)",
    "answer": "<form id=\"target\">\n        <select name=\"age\">\n            <option value=\"aaa\">aaa</option>\n            <option value=\"bbb\" selected>bbb</option>\n        </select>\n        <select name=\"friends\" multiple>\n            <option value=\"qiu\" selected>qiu</option>\n            <option value=\"de\">de</option>\n            <option value=\"qing\" selected>qing</option>\n        </select>\n        <input name=\"name\" value=\"qiudeqing\">\n        <input type=\"password\" name=\"password\" value=\"11111\">\n        <input type=\"hidden\" name=\"salery\" value=\"3333\">\n        <textarea name=\"description\">description</textarea>\n        <input type=\"checkbox\" name=\"hobby\" checked value=\"football\">Football\n        <input type=\"checkbox\" name=\"hobby\" value=\"basketball\">Basketball\n        <input type=\"radio\" name=\"sex\" checked value=\"Female\">Female\n        <input type=\"radio\" name=\"sex\" value=\"Male\">Male\n    </form>\n\n\n    <script>\n\n    /**\n     * 将一个表单元素序列化为可提交的字符串\n     *\n     * @param {FormElement} form 需要序列化的表单元素\n     * @return {string} 表单序列化后的字符串\n     */\n    function serializeForm(form) {\n      if (!form || form.nodeName.toUpperCase() !== 'FORM') {\n        return;\n      }\n\n      var result = [];\n\n      var i, len;\n      var field, fieldName, fieldType;\n\n      for (i = 0, len = form.length; i < len; ++i) {\n        field = form.elements[i];\n        fieldName = field.name;\n        fieldType = field.type;\n\n        if (field.disabled || !fieldName) {\n          continue;\n        } // enf if\n\n        switch (fieldType) {\n          case 'text':\n          case 'password':\n          case 'hidden':\n          case 'textarea':\n            result.push(encodeURIComponent(fieldName) + '=' +\n                encodeURIComponent(field.value));\n            break;\n\n          case 'radio':\n          case 'checkbox':\n            if (field.checked) {\n              result.push(encodeURIComponent(fieldName) + '=' +\n                encodeURIComponent(field.value));\n            }\n            break;\n\n          case 'select-one':\n          case 'select-multiple':\n            for (var j = 0, jLen = field.options.length; j < jLen; ++j) {\n              if (field.options[j].selected) {\n                result.push(encodeURIComponent(fieldName) + '=' +\n                  encodeURIComponent(field.options[j].value || field.options[j].text));\n              }\n            } // end for\n            break;\n\n          case 'file':\n          case 'submit':\n            break; // 是否处理？\n\n          default:\n            break;\n        } // end switch\n      } // end for\n\n        return result.join('&');\n    }\n\n    var form = document.getElementById('target');\n    console.log(serializeForm(form));\n    </script>",
    "options": []
}