{
    "type": "reply",
    "tag": "javascript",
    "difficulty": "1",
    "from": "https://github.com/hawx1993/front-end-interview-questions",
    "description": "使用原生javascript给下面列表中的li节点绑定点击事件,点击时创建一个Object对象,兼容IE和标准浏览器",
    "answer": "```\n<ul id=\"nav\">\n    <li><a href=\"http://11111\">111</a></li>\n    <li><a href=\"http://2222\">222</a></li>\n    <li><a href=\"http://333\">333</a></li>\n    <li><a href=\"http://444\">444</a></li>\n</ul>\n\nObject:\n{\n    \"index\": 1,\n    \"name\": \"111\",\n    \"link\": \"http://1111\"\n}\n```\n\nscript:\n\n```\nvar EventUtil = {\n    getEvent: function (event) {\n        return event || window.event;\n    },\n    getTarget: function (event) {\n        return event.target || event.srcElement;\n    },\n    // 返回注册成功的监听器，IE中需要使用返回值来移除监听器\n    on: function (elem, type, handler) {\n        if (elem.addEventListener) {\n            elem.addEventListener(type, handler, false);\n            return handler;\n        } else if (elem.attachEvent) {\n            function wrapper(event) {\n                return handler.call(elem, event);\n            };\n            elem.attachEvent('on' + type, wrapper);\n            return wrapper;\n        }\n    },\n    off: function (elem, type, handler) {\n        if (elem.removeEventListener) {\n            elem.removeEventListener(type, handler, false);\n        } else if (elem.detachEvent) {\n            elem.detachEvent('on' + type, handler);\n        }\n    },\n    preventDefault: function (event) {\n        if (event.preventDefault) {\n            event.preventDefault();\n        } else if ('returnValue' in event) {\n            event.returnValue = false;\n        }\n    },\n    stopPropagation: function (event) {\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        } else if ('cancelBubble' in event) {\n            event.cancelBubble = true;\n        }\n    }\n};\nvar DOMUtil = {\n    text: function (elem) {\n        if ('textContent' in elem) {\n            return elem.textContent;\n        } else if ('innerText' in elem) {\n            return elem.innerText;\n        }\n    },\n    prop: function (elem, propName) {\n        return elem.getAttribute(propName);\n    }\n};\n\nvar nav = document.getElementById('nav');\n\nEventUtil.on(nav, 'click', function (event) {\n    var event = EventUtil.getEvent(event);\n    var target = EventUtil.getTarget(event);\n\n    var children = this.children;\n    var i, len;\n    var anchor;\n    var obj = {};\n\n    for (i = 0, len = children.length; i < len; ++i) {\n        if (children[i] === target) {\n            obj.index = i + 1;\n            anchor = target.getElementsByTagName('a')[0];\n            obj.name = DOMUtil.text(anchor);\n            obj.link = DOMUtil.prop(anchor, 'href');\n        }\n    }\n\n    alert('index: ' + obj.index + ' name: ' + obj.name +\n        ' link: ' + obj.link);\n});\n```",
    "options": []
}