{
    "type": "reply",
    "tag": "javascript",
    "difficulty": "1",
    "from": "https://github.com/qiu-deqing/fe-interview",
    "description": "<p>使用原生javascript给下面列表中的li节点绑定点击事件,点击时创建一个Object对象,兼容IE和标准浏览器</p>\n",
    "answer": "<pre><code>&lt;ul id=&quot;nav&quot;&gt;\n    &lt;li&gt;&lt;a href=&quot;http://11111&quot;&gt;111&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=&quot;http://2222&quot;&gt;222&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=&quot;http://333&quot;&gt;333&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=&quot;http://444&quot;&gt;444&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\nObject:\n{\n    &quot;index&quot;: 1,\n    &quot;name&quot;: &quot;111&quot;,\n    &quot;link&quot;: &quot;http://1111&quot;\n}\n</code></pre><p>script:</p>\n<pre><code>var EventUtil = {\n    getEvent: function (event) {\n        return event || window.event;\n    },\n    getTarget: function (event) {\n        return event.target || event.srcElement;\n    },\n    // 返回注册成功的监听器，IE中需要使用返回值来移除监听器\n    on: function (elem, type, handler) {\n        if (elem.addEventListener) {\n            elem.addEventListener(type, handler, false);\n            return handler;\n        } else if (elem.attachEvent) {\n            function wrapper(event) {\n                return handler.call(elem, event);\n            };\n            elem.attachEvent(&#39;on&#39; + type, wrapper);\n            return wrapper;\n        }\n    },\n    off: function (elem, type, handler) {\n        if (elem.removeEventListener) {\n            elem.removeEventListener(type, handler, false);\n        } else if (elem.detachEvent) {\n            elem.detachEvent(&#39;on&#39; + type, handler);\n        }\n    },\n    preventDefault: function (event) {\n        if (event.preventDefault) {\n            event.preventDefault();\n        } else if (&#39;returnValue&#39; in event) {\n            event.returnValue = false;\n        }\n    },\n    stopPropagation: function (event) {\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        } else if (&#39;cancelBubble&#39; in event) {\n            event.cancelBubble = true;\n        }\n    }\n};\nvar DOMUtil = {\n    text: function (elem) {\n        if (&#39;textContent&#39; in elem) {\n            return elem.textContent;\n        } else if (&#39;innerText&#39; in elem) {\n            return elem.innerText;\n        }\n    },\n    prop: function (elem, propName) {\n        return elem.getAttribute(propName);\n    }\n};\n\nvar nav = document.getElementById(&#39;nav&#39;);\n\nEventUtil.on(nav, &#39;click&#39;, function (event) {\n    var event = EventUtil.getEvent(event);\n    var target = EventUtil.getTarget(event);\n\n    var children = this.children;\n    var i, len;\n    var anchor;\n    var obj = {};\n\n    for (i = 0, len = children.length; i &lt; len; ++i) {\n        if (children[i] === target) {\n            obj.index = i + 1;\n            anchor = target.getElementsByTagName(&#39;a&#39;)[0];\n            obj.name = DOMUtil.text(anchor);\n            obj.link = DOMUtil.prop(anchor, &#39;href&#39;);\n        }\n    }\n\n    alert(&#39;index: &#39; + obj.index + &#39; name: &#39; + obj.name +\n        &#39; link: &#39; + obj.link);\n});\n</code></pre>",
    "options": []
}