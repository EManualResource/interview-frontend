{
    "type": "reply",
    "tag": "javascript",
    "difficulty": "1",
    "from": "https://github.com/qiu-deqing/fe-interview",
    "description": "<p>请用原生js实现一个函数,给页面制定的任意一个元素添加一个透明遮罩(透明度可变,默认0.2),使这个区域点击无效,要求兼容IE8+及各主流浏览器,遮罩层效果如下图所示:</p>\n",
    "answer": "<p><img src=\"img/element-mask.jpg\" alt=\"遮罩效果\"></p>\n<pre><code>&lt;style&gt;\n#target {\n    width: 200px;\n    height: 300px;\n    margin: 40px;\n    background-color: tomato;\n}\n&lt;/style&gt;\n\n&lt;div id=&quot;target&quot;&gt;&lt;/div&gt;\n\n&lt;script&gt;\nfunction addMask(elem, opacity) {\n    opacity = opacity || 0.2;\n\n    var rect = elem.getBoundingClientRect();\n    var style = getComputedStyle(elem, null);\n\n    var mask = document.createElement(&#39;div&#39;);\n    mask.style.position = &#39;absolute&#39;;\n    var marginLeft = parseFloat(style.marginLeft);\n    mask.style.left = (elem.offsetLeft - marginLeft) + &#39;px&#39;;\n    var marginTop = parseFloat(style.marginTop);\n    mask.style.top = (elem.offsetTop - marginTop) + &#39;px&#39;;\n    mask.style.zIndex = 9999;\n    mask.style.opacity = &#39;&#39; + opacity;\n    mask.style.backgroundColor = &#39;#000&#39;;\n\n    mask.style.width = (parseFloat(style.marginLeft) +\n        parseFloat(style.marginRight) + rect.width) + &#39;px&#39;;\n    mask.style.height = (parseFloat(style.marginTop) +\n        parseFloat(style.marginBottom) + rect.height) + &#39;px&#39;;\n\n    elem.parentNode.appendChild(mask);\n}\n\nvar target = document.getElementById(&#39;target&#39;);\naddMask(target);\n\ntarget.addEventListener(&#39;click&#39;, function () {\n    console.log(&#39;click&#39;);\n}, false);\n&lt;/script&gt;\n</code></pre>",
    "options": []
}