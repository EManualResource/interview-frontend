{
    "type": "reply",
    "tag": "javascript",
    "difficulty": "1",
    "from": "https://github.com/qiu-deqing/fe-interview",
    "description": "请用原生js实现一个函数,给页面制定的任意一个元素添加一个透明遮罩(透明度可变,默认0.2),使这个区域点击无效,要求兼容IE8+及各主流浏览器,遮罩层效果如下图所示:",
    "answer": "![遮罩效果](img/element-mask.jpg)\n\n```\n<style>\n#target {\n    width: 200px;\n    height: 300px;\n    margin: 40px;\n    background-color: tomato;\n}\n</style>\n\n<div id=\"target\"></div>\n\n<script>\nfunction addMask(elem, opacity) {\n    opacity = opacity || 0.2;\n\n    var rect = elem.getBoundingClientRect();\n    var style = getComputedStyle(elem, null);\n\n    var mask = document.createElement('div');\n    mask.style.position = 'absolute';\n    var marginLeft = parseFloat(style.marginLeft);\n    mask.style.left = (elem.offsetLeft - marginLeft) + 'px';\n    var marginTop = parseFloat(style.marginTop);\n    mask.style.top = (elem.offsetTop - marginTop) + 'px';\n    mask.style.zIndex = 9999;\n    mask.style.opacity = '' + opacity;\n    mask.style.backgroundColor = '#000';\n\n    mask.style.width = (parseFloat(style.marginLeft) +\n        parseFloat(style.marginRight) + rect.width) + 'px';\n    mask.style.height = (parseFloat(style.marginTop) +\n        parseFloat(style.marginBottom) + rect.height) + 'px';\n\n    elem.parentNode.appendChild(mask);\n}\n\nvar target = document.getElementById('target');\naddMask(target);\n\ntarget.addEventListener('click', function () {\n    console.log('click');\n}, false);\n</script>\n```",
    "options": []
}